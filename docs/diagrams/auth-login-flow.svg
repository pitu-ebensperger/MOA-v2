<svg xmlns="http://www.w3.org/2000/svg" width="960" height="420" viewBox="0 0 960 420">
  <style>
    .box{fill:#fff;stroke:#1f2937;stroke-width:2;rx:8;ry:8}
    .label{font:14px system-ui; fill:#111827}
    .small{font:12px system-ui; fill:#374151}
    .arrow{stroke:#6b7280;stroke-width:2;marker-end:url(#arrow)}
    .title{font:16px system-ui; fill:#111827; font-weight:700}
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L6,3 z" fill="#6b7280" />
    </marker>
  </defs>
  <text x="20" y="28" class="title">Auth/Login: token, contexto y rutas protegidas</text>

  <rect class="box" x="40" y="70" width="220" height="60"/>
  <text class="label" x="60" y="105">Formulario Login</text>

  <rect class="box" x="300" y="70" width="200" height="60"/>
  <text class="label" x="320" y="105">POST /auth/login</text>

  <rect class="box" x="540" y="70" width="180" height="60"/>
  <text class="label" x="560" y="95">Token (JWT)</text>
  <text class="small" x="560" y="115">LocalStorage</text>

  <rect class="box" x="760" y="70" width="160" height="60"/>
  <text class="label" x="780" y="95">AuthContext</text>
  <text class="small" x="780" y="115">isAuthenticated</text>

  <line class="arrow" x1="260" y1="100" x2="300" y2="100"/>
  <line class="arrow" x1="500" y1="100" x2="540" y2="100"/>
  <line class="arrow" x1="720" y1="100" x2="760" y2="100"/>

  <rect class="box" x="260" y="170" width="220" height="60"/>
  <text class="label" x="280" y="205">Protected: /admin/*</text>

  <rect class="box" x="540" y="170" width="220" height="60"/>
  <text class="label" x="560" y="205">verifyAdmin (backend)</text>

  <line class="arrow" x1="480" y1="200" x2="540" y2="200"/>

  <rect class="box" x="260" y="260" width="240" height="60"/>
  <text class="label" x="280" y="295">handleAuthError(401/403)</text>

  <rect class="box" x="540" y="260" width="240" height="60"/>
  <text class="label" x="560" y="295">Clear storage + redirect</text>

  <line class="arrow" x1="500" y1="290" x2="540" y2="290"/>

  <text class="small" x="60" y="360">Si no hay token: redirigir a login con authRequired=true</text>
</svg>